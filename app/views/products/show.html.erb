<div class = "row">
  <div class = "col-md-6">
    <div class="card my-show-card">

      <div class = "my-show-image-wrapper">
        <%= begin
          image_tag(@product.image_url, :class => "my-show-image")
        rescue
          image_tag("no-image.gif", :class => "my-show-image")
        end %>
      </div>

      <div class="card-body">
        <h5 class="card-title"> <%= @product.name %></h5>

        <p class="card-text">
          <strong>Name:</strong>
          <%= @product.name %>
        </p>

        <p class="card-text">
          <strong>Description:</strong>
          <%= @product.description %>
        </p>

        <p class="card-text">
          <strong>Image url:</strong>
          <%= @product.image_url %>
        </p>

        <p class="card-text">
          <strong>Colour UK:</strong>
          <%= @product.colour %>
        </p>

        <p class="card-text">
          <strong>Price:</strong>
          <%= @product.price %>
        </p>

        <p>Average Rating: <div class="rated" data-score="<%= @product.average_rating %>"></div> </p>
        <hr>
        <div id = "myPaymentForm">
          <% if @product.price.present? %>
            <% if user_signed_in? %>
                <%= form_with(url: '/payments/create') do |form| %>
                <%= render partial: "shared/stripe_checkout_button" %>
                <%= hidden_field_tag(:hidden_product_id, @product.id) %>
                <% end %>
              <% else %>
                <%= link_to 'Login to buy!', new_user_session_path, class: "btn btn-primary", id: "myLoginToBuyBtn" %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div class = "row">
      <div class = "col-md-6">
        <%= render 'new_comment' %>
      </div>
    </div>

    <div class = "my-nav-buttons">
      <% if user_signed_in? && current_user.admin?%>
      <%= link_to 'Edit', edit_product_path(@product), class: "btn-sm btn-light" %> |
      <% end %>
      <%= link_to 'Back', products_path, class: "btn-sm btn-light" %>
    </div>

  </div>   <!-- end column -->

  <div class = "col-md-6">
    <h2> User reviews </h2>
    <div class = "my-user-review">
      <% if @product.comments.exists?%>
      <%= render 'comments' %>
      <% else %>
      <p>Sorry, no user reviews yet.</p>
      <% end%>
    </div>
  </div> <!-- end column -->

</div> <!-- end row -->
