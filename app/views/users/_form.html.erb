<%= form_with(model: user, local: true) do |form| %>
<% if user.errors.any? %>
<div class = "my-error-explanation">
<p><%=fa_stacked_icon "exclamation-triangle", base: "square-o"%>
<%= pluralize(user.errors.count, "error") %> prohibited this user from being saved:</p>

  <ul>
    <% user.errors.full_messages.each do |message| %>
    <li><%= message %></li>
    <% end %>
  </ul>
</div>
<% end %>

<form>
  <div class="row">
    <div class="col-md-6 form-group">
      <%= form.label :first_name, class: "control-label" %>
      <%= form.text_field :first_name , class: "form-control" %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 form-group">
      <%= form.label :last_name, class: "control-label" %>
      <%= form.text_field :last_name, class: "form-control" %>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 form-group">
      <%= form.label :email, class: "control-label" %>
      <%#= form.text_field :email, class: "form-control", disabled: true %>
      <%= form.text_field :email, class: "form-control"%>

    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-6">
      <%= form.label :password %>

      <%if change_password%>
      <i>(leave blank if you don't want to change it)</i><br />
      <%end%>

      <%= form.password_field :password, autocomplete: "off", class: "form-control" %>
      <% if @minimum_password_length %>
      <em><%= @minimum_password_length %> characters minimum</em>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-6">
      <%= form.label :password_confirmation%>
      <%= form.password_field :password_confirmation, autocomplete: "off" , class: "form-control"%>
    </div>
  </div>

<%if change_password%>
  <div class="row">
    <div class="form-group col-md-6">
      <%= form.label :current_password %> <i>(we need your current password to confirm your changes)</i>
      <%= form.password_field :current_password, autocomplete: "off" , class: "form-control"%>
    </div>
  </div>
<%end%>

  <div class="row">
    <%= form.submit "Submit changes", class: "btn btn-light my-form-submit-button" %>
  </div>

</form>

  <div class="col-md-6 my-delete-account">
    <h2>Delete account</h3>
    <p>Unhappy? You can delete your account by clicking the button below. This action cannot be undone!
    <%= button_to "Delete my account", user, data: { confirm: "Are you sure?" }, method: :delete , class: "btn btn-danger mr-auto"%></p>
  </div>

<% end %>
